// server/scripts/initCreditCategories.js
import mongoose from 'mongoose';
import CreditCategory from '../models/CreditCategory.js';
import dotenv from 'dotenv';

dotenv.config();

const categories = [
    // –ê–∑ –∏ –¥—Ä—É–≥–∏—Ç–µ
    {
        pillar: '–ê–∑ –∏ –¥—Ä—É–≥–∏—Ç–µ',
        name: '–£—á–µ–Ω–∏—á–µ—Å–∫–∏ –ø–∞—Ä–ª–∞–º–µ–Ω—Ç',
        description: '–£—á–∞—Å—Ç–∏–µ –≤ —É—á–µ–Ω–∏—á–µ—Å–∫–æ—Ç–æ —Å–∞–º–æ—É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ'
    },
    {
        pillar: '–ê–∑ –∏ –¥—Ä—É–≥–∏—Ç–µ',
        name: '–î–æ–±—Ä–æ–≤–æ–ª—á–µ—Å—Ç–≤–æ',
        description: '–î–æ–±—Ä–æ–≤–æ–ª—á–µ—Å–∫–∞ –¥–µ–π–Ω–æ—Å—Ç –≤ —É—á–∏–ª–∏—â–µ –∏–ª–∏ –æ–±—â–Ω–æ—Å—Ç—Ç–∞'
    },
    {
        pillar: '–ê–∑ –∏ –¥—Ä—É–≥–∏—Ç–µ',
        name: '–ú–µ–Ω—Ç–æ—Ä—Å—Ç–≤–æ',
        description: '–ü–æ–º–æ—â –∏ –ø–æ–¥–∫—Ä–µ–ø–∞ –Ω–∞ –¥—Ä—É–≥–∏ —É—á–µ–Ω–∏—Ü–∏'
    },
    {
        pillar: '–ê–∑ –∏ –¥—Ä—É–≥–∏—Ç–µ',
        name: '–û—Ä–≥–∞–Ω–∏–∑–∏—Ä–∞–Ω–µ –Ω–∞ —Å—ä–±–∏—Ç–∏—è',
        description: '–û—Ä–≥–∞–Ω–∏–∑–∏—Ä–∞–Ω–µ –Ω–∞ —É—á–∏–ª–∏—â–Ω–∏ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è'
    },
    {
        pillar: '–ê–∑ –∏ –¥—Ä—É–≥–∏—Ç–µ',
        name: '–õ–∏–¥–µ—Ä—Å—Ç–≤–æ –≤ –ø—Ä–æ–µ–∫—Ç–∏',
        description: '–†—ä–∫–æ–≤–æ–¥–µ–Ω–µ –Ω–∞ —É—á–µ–Ω–∏—á–µ—Å–∫–∏ –ø—Ä–æ–µ–∫—Ç–∏'
    },

    // –ú–∏—Å–ª–µ–Ω–µ
    {
        pillar: '–ú–∏—Å–ª–µ–Ω–µ',
        name: '–£—á–∞—Å—Ç–∏–µ –≤ –æ–ª–∏–º–ø–∏–∞–¥–∞',
        description: '–£—á–∞—Å—Ç–∏–µ –≤ –ø—Ä–µ–¥–º–µ—Ç–Ω–∏ –æ–ª–∏–º–ø–∏–∞–¥–∏'
    },
    {
        pillar: '–ú–∏—Å–ª–µ–Ω–µ',
        name: '–ù–∞—É—á–µ–Ω –ø—Ä–æ–µ–∫—Ç',
        description: '–†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –Ω–∞ –Ω–∞—É—á–µ–Ω –∏–ª–∏ –∏–∑—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—Å–∫–∏ –ø—Ä–æ–µ–∫—Ç'
    },
    {
        pillar: '–ú–∏—Å–ª–µ–Ω–µ',
        name: '–ò–Ω–æ–≤–∞—Ç–∏–≤–Ω–æ —Ä–µ—à–µ–Ω–∏–µ',
        description: '–°—ä–∑–¥–∞–≤–∞–Ω–µ –Ω–∞ –∏–Ω–æ–≤–∞—Ç–∏–≤–Ω–æ —Ä–µ—à–µ–Ω–∏–µ –Ω–∞ –ø—Ä–æ–±–ª–µ–º'
    },
    {
        pillar: '–ú–∏—Å–ª–µ–Ω–µ',
        name: '–ü—É–±–ª–∏–∫–∞—Ü–∏—è/–ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏—è',
        description: '–ü—É–±–ª–∏–∫—É–≤–∞–Ω–µ –Ω–∞ —Å—Ç–∞—Ç–∏—è –∏–ª–∏ –∏–∑–Ω–∞—Å—è–Ω–µ –Ω–∞ –ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏—è'
    },
    {
        pillar: '–ú–∏—Å–ª–µ–Ω–µ',
        name: '–ò–∑—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—Å–∫–∞ –¥–µ–π–Ω–æ—Å—Ç',
        description: '–ü—Ä–æ–≤–µ–∂–¥–∞–Ω–µ –Ω–∞ –∏–∑—Å–ª–µ–¥–≤–∞–Ω–µ –∏–ª–∏ –µ–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç'
    },

    // –ü—Ä–æ—Ñ–µ—Å–∏—è
    {
        pillar: '–ü—Ä–æ—Ñ–µ—Å–∏—è',
        name: '–°—Ç–∞–∂',
        description: '–°—Ç–∞–∂ –≤ –∫–æ–º–ø–∞–Ω–∏—è –∏–ª–∏ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è'
    },
    {
        pillar: '–ü—Ä–æ—Ñ–µ—Å–∏—è',
        name: '–ü—Ä–æ—Ñ–µ—Å–∏–æ–Ω–∞–ª–µ–Ω –ø—Ä–æ–µ–∫—Ç',
        description: '–†–∞–±–æ—Ç–∞ –ø–æ –ø—Ä–æ—Ñ–µ—Å–∏–æ–Ω–∞–ª–µ–Ω –ø—Ä–æ–µ–∫—Ç'
    },
    {
        pillar: '–ü—Ä–æ—Ñ–µ—Å–∏—è',
        name: '–°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç',
        description: '–ü–æ–ª—É—á–∞–≤–∞–Ω–µ –Ω–∞ –ø—Ä–æ—Ñ–µ—Å–∏–æ–Ω–∞–ª–µ–Ω —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç'
    },
    {
        pillar: '–ü—Ä–æ—Ñ–µ—Å–∏—è',
        name: '–£—á–∞—Å—Ç–∏–µ –≤ –∫–æ–Ω–∫—É—Ä—Å',
        description: '–£—á–∞—Å—Ç–∏–µ –≤ –ø—Ä–æ—Ñ–µ—Å–∏–æ–Ω–∞–ª–µ–Ω –∫–æ–Ω–∫—É—Ä—Å –∏–ª–∏ —Å—ä—Å—Ç–µ–∑–∞–Ω–∏–µ'
    },
    {
        pillar: '–ü—Ä–æ—Ñ–µ—Å–∏—è',
        name: '–ü—Ä–æ—Ñ–µ—Å–∏–æ–Ω–∞–ª–Ω–æ –æ–±—É—á–µ–Ω–∏–µ',
        description: '–ó–∞–≤—ä—Ä—à–≤–∞–Ω–µ –Ω–∞ –ø—Ä–æ—Ñ–µ—Å–∏–æ–Ω–∞–ª–µ–Ω –∫—É—Ä—Å –∏–ª–∏ –æ–±—É—á–µ–Ω–∏–µ'
    }
];

async function initCategories() {
    try {
        // –°–≤—ä—Ä–∑–≤–∞–Ω–µ —Å –±–∞–∑–∞—Ç–∞ –¥–∞–Ω–Ω–∏
        await mongoose.connect(process.env.MONGODB_URI || 'mongodb://localhost:27017/technofolio');
        console.log('‚úÖ –°–≤—ä—Ä–∑–∞–Ω —Å MongoDB');

        let addedCount = 0;
        let existingCount = 0;

        for (const categoryData of categories) {
            const existing = await CreditCategory.findOne({
                name: categoryData.name,
                pillar: categoryData.pillar
            });

            if (existing) {
                existingCount++;
                console.log(`‚è≠Ô∏è  –ö–∞—Ç–µ–≥–æ—Ä–∏—è—Ç–∞ "${categoryData.name}" –≤ —Å—Ç—ä–ª–± "${categoryData.pillar}" –≤–µ—á–µ —Å—ä—â–µ—Å—Ç–≤—É–≤–∞`);
            } else {
                await CreditCategory.create(categoryData);
                addedCount++;
                console.log(`‚úÖ –î–æ–±–∞–≤–µ–Ω–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏—è: "${categoryData.name}" –≤ —Å—Ç—ä–ª–± "${categoryData.pillar}"`);
            }
        }

        console.log('\nüìä –†–µ–∑—é–º–µ:');
        console.log(`‚úÖ –î–æ–±–∞–≤–µ–Ω–∏ –Ω–æ–≤–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏: ${addedCount}`);
        console.log(`‚è≠Ô∏è  –°—ä—â–µ—Å—Ç–≤—É–≤–∞—â–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏: ${existingCount}`);
        console.log(`üìÅ –û–±—â–æ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –≤ –±–∞–∑–∞—Ç–∞: ${await CreditCategory.countDocuments()}`);

        process.exit(0);
    } catch (error) {
        console.error('‚ùå –ì—Ä–µ—à–∫–∞:', error);
        process.exit(1);
    }
}

// –°—Ç–∞—Ä—Ç–∏—Ä–∞–Ω–µ –Ω–∞ —Å–∫—Ä–∏–ø—Ç–∞
initCategories();